function log(a){console.log(a)}!function(a,b,c){"use strict";function d(a){var c;return c=y(a),c!==c?0:0===c||b===c||-b===c?c:(0<c||-1)*x.floor(x.abs(c))}function e(a,b){var e,f,g,h,i;for(f=w(this),g=f.length>>>0,c!==a?(a=d(a),h=0>a?x.max(g+a,0):x.min(a,g)):h=0,c!==b&&(b=d(b),g=0>b?x.max(g+b,0):x.min(b,g)),e=new v(g-h),i=0;h<g;++h,++i)h in f&&(e[i]=f[h]);return e}function f(a,b){var e,f,g;for(e=w(this),f=e.length>>>0,c!==b?(b=d(b),g=0>b?x.max(f+b,0):x.min(b,f)):g=0;g<f;++g)if(g in e&&a===e[g])return g;return-1}function g(a,b){var e,f,g;for(e=w(this),f=e.length>>>0,c!==b?(b=d(b),g=0>b?f-x.abs(b):x.min(b,f-1)):g=f-1;-1<g;--g)if(g in e&&a===e[g])return g;return-1}function h(a,b){var c,d,e;for(c=w(this),p(a),d=c.length>>>0,e=0;e<d;++e)e in c&&a.call(b,c[e],e,c)}function i(a,b){var c,d,e;for(c=w(this),p(a),d=c.length>>>0,e=0;e<d;++e)if(e in c&&!a.call(b,c[e],e,c))return!1;return!0}function j(a,b){var c,d,e;for(c=w(this),p(a),d=c.length>>>0,e=0;e<d;++e)if(e in c&&a.call(b,c[e],e,c))return!0;return!1}function k(a,b){var c,d,e,f,g=[];for(c=w(this),p(a),d=c.length>>>0,e=f=0;e<d;++e)e in c&&a.call(b,c[e],e,c)&&(g[f++]=c[e]);return g}function l(a,b){var c,d,e,f=[];for(c=w(this),p(a),d=c.length>>>0,e=0;e<d;++e)e in c&&(f[e]=a.call(b,c[e],e,c));return f}function m(a,b){var d,e,f,g;for(d=w(this),p(a),e=c!==b,f=d.length>>>0,g=0;g<f;++g)g in d&&(e?b=a(b,d[g],g,d):(b=d[g],e=!0));return q(e),b}function n(a,b){var d,e,f;for(d=w(this),p(a),e=c!==b,f=(d.length>>>0)-1;-1<f;--f)f in d&&(e?b=a(b,d[f],f,d):(b=d[f],e=!0));return q(e),b}function o(a){return"[object Array]"===w.prototype.toString.call(a)}function p(a){if("[object Function]"!==w.prototype.toString.call(a))throw new Error(a+" is not a function")}function q(a){if(!a)throw new Error("reduce of empty array with no initial value")}function r(a){var b=!0;if(v.prototype[a])try{v.prototype[a].call(c,/test/,null),b=!1}catch(a){}else b=!1;return b}function s(a){var b=!0;if(v[a])try{v[a](c,/test/,null),b=!1}catch(a){}else b=!1;return b}function t(a){s(a)||(v[a]=u(a))}function u(a){return function(b){var d;if(c===b||null===b)throw new Error("Array.prototype."+a+" called on "+b);return d=v.prototype.slice.call(arguments,1),v.prototype[a].apply(b,d)}}var v=a.Array,w=a.Object,x=a.Math,y=a.Number,z={indexOf:f,lastIndexOf:g,forEach:h,every:i,some:j,filter:k,map:l,reduce:m,reduceRight:n};for(var A in z)z.hasOwnProperty(A)&&(r(A)||(v.prototype[A]=z[A]),t(A));if(v.isArray=v.isArray||o,["concat","join","slice","pop","push","reverse","shift","sort","splice","unshift"].forEach(t),document)try{v.slice(document.childNodes)}catch(a){v.prototype.slice=e}}(this,1/0),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,d=arguments.length;for(c=0;c<d;c++)a=arguments[c],b.call(this,a)}};b("add"),b("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:c.call(this,a)}}a=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;d<e;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",i(this,a)!==-1},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",i(this,a)===-1&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);b!==-1;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(a){a.number===-2146823252&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self)),this.Element&&Element.prototype.attachEvent&&!Element.prototype.addEventListener&&function(){function a(a,b){Window.prototype[a]=HTMLDocument.prototype[a]=Element.prototype[a]=b}function b(a){b.interval&&document.body&&(b.interval=clearInterval(b.interval),document.dispatchEvent(new CustomEvent("DOMContentLoaded")))}a("addEventListener",function(a,b){var c=this,d=c.addEventListener.listeners=c.addEventListener.listeners||{},e=d[a]=d[a]||[];e.length||c.attachEvent("on"+a,e.event=function(a){var b=c.document&&c.document.documentElement||c.documentElement||{scrollLeft:0,scrollTop:0};a.currentTarget=c,a.pageX=a.clientX+b.scrollLeft,a.pageY=a.clientY+b.scrollTop,a.preventDefault=function(){a.returnValue=!1},a.relatedTarget=a.fromElement||null,a.stopImmediatePropagation=function(){i=!1,a.cancelBubble=!0},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,a.timeStamp=+new Date;var d={};for(var f in a)d[f]=a[f];for(var g,f=0,h=[].concat(e),i=!0;i&&(g=h[f]);++f)for(var j,k=0;j=e[k];++k)if(j==g){j.call(c,d);break}}),e.push(b)}),a("removeEventListener",function(a,b){for(var c,d=this,e=d.addEventListener.listeners=d.addEventListener.listeners||{},f=e[a]=e[a]||[],g=f.length-1;c=f[g];--g)if(c==b){f.splice(g,1);break}!f.length&&f.event&&d.detachEvent("on"+a,f.event)}),a("dispatchEvent",function(a){var b=this,c=a.type,d=b.addEventListener.listeners=b.addEventListener.listeners||{},e=d[c]=d[c]||[];try{return b.fireEvent("on"+c,a)}catch(b){return void(e.event&&e.event(a))}}),Object.defineProperty(Window.prototype,"CustomEvent",{get:function(){var a=this;return function(b,c){var d,e=a.document.createEventObject();e.type=b;for(d in c)"cancelable"==d?e.returnValue=!c.cancelable:"bubbles"==d?e.cancelBubble=!c.bubbles:"detail"==d&&(e.detail=c.detail);return e}}}),b.interval=setInterval(b,1),window.addEventListener("load",b)}(),(!this.CustomEvent||"object"==typeof this.CustomEvent)&&function(){this.CustomEvent=function(a,b){var c;b=b||{bubbles:!1,cancelable:!1,detail:void 0};try{c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail)}catch(d){c=document.createEvent("Event"),c.initEvent(a,b.bubbles,b.cancelable),c.detail=b.detail}return c}}(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.shll=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";function b(){g={container:document.getElementById("content"),server_name:document.getElementsByName("server_name")[0].content||"",doc_root:document.getElementsByName("doc_root")[0].content||"",uri_required_param_indicator:"&",uri_optional_param_indicator:"?",uri_space_replacement:"-",uri_space_standin:"_"},h.init()}function c(){var a,b=[];return{encodeParams:function(a){var b=Object.keys(a).length,c=1,d="?";for(var e in a)a.hasOwnProperty(e)&&(d+=e+"="+a[e],c<b&&(d+="&"),c++);return d},get:function(b,c){var d=this;return c&&(b+=this.encodeParams(c)),a=new XMLHttpRequest,a.open("GET",encodeURI(b),!0),a.send(),a.onload=function(){d.unload(this.response)},this},then:function(a){return b.push(a),this},unload:function(a){window.setTimeout(function(){for(var c in b)b[c].call(j,a);b=[],j.digest()},0)}}}function d(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)}function e(a){return""!==a&&"string"==typeof a&&(a=a.trim(),a=a.split(g.uri_space_replacement).join(g.uri_space_standin),a=a.split(" ").join(g.uri_space_replacement),a=encodeURI(a))}function f(a){return""!==a&&"string"==typeof a&&(a=a.split(g.uri_space_replacement).join(" "),a=a.split(g.uri_space_standin).join(g.uri_space_replacement),a=decodeURI(a))}var g={};window.addEventListener?addEventListener("load",b,!1):window.attachEvent?attachEvent("onload",b):onload=b;var h=function(){var a,b=[],c=[],e="",h={},k={};return{init:function(){this.update();var a=this;d(window,"popstate",function(b){log("pop"),a.update()})},update:function(){var a=document.location.pathname.replace(g.doc_root,"");return e!==a&&(e=a,k=h,h=this.match(a),h?this.render(h):this.handleNoMatch()),this},handleNoMatch:function(){var c=document.location.origin.replace("http://","");c===g.server_name&&("undefined"!=typeof a?this.render(a):this.render(b[0]))},listen:function(){for(var a=this,b="",e={},f=!1,g=0,h=document.links.length;g<h;g++)b=document.links[g].getAttribute("href"),e=this.match(b),f=this.listensTo(document.links[g]),e&&!f&&(d(document.links[g],"click",function(b){a.process(this)&&b.preventDefault()}),c.push(document.links[g]))},listensTo:function(a){for(var b=0,d=c.length;b<d;b++)if(c[b]===a)return!0;return!1},process:function(a){var b=a.getAttribute("href"),c=this.match(b);return!!c&&(b!==e&&this.set(b).update(),!0)},set:function(a){return history.pushState?history.pushState(null,null,g.doc_root+a):location.assign(g.doc_root+a),this},match:function(a){var c;a.indexOf("?")!==-1&&a.indexOf("?")!==a.length-1&&(c=a.substr(a.indexOf("?")+1),a=a.substr(0,a.indexOf("?")));var d=a.split("/");a:for(var e=0,h=b.length;e<h;e++){for(var i=b[e].path.split("/"),j=i.length,k={},l=0;l<j;l++)if(i[l].charAt(0)===g.uri_required_param_indicator){if(d.length!==j)continue a;k[i[l].substring(1)]=f(d[l])}else if(i[l].charAt(0)===g.uri_optional_param_indicator)k[i[l].substring(1)]=f(d[l])||"";else if(i[l]!==d[l])continue a;if("undefined"!=typeof c)for(var m=c.split("&"),n=0;n<m.length;n++)if(m[n].indexOf("=")!==-1){var o=m[n].split("=");k[o[0]]=o[1]}var p=b[e];return p.params=k,p}return!1},render:function(a){return i.render(a.template,a.force).then(function(){"function"==typeof a.callback&&a.callback.call(j,a.params),"function"==typeof k.offload&&k.path!==a.path&&k.offload.call(j,a.params),"string"==typeof a.title&&j.title(a.title)}),this},add:function(a){b.push(a)},addErrorRoute:function(b,c){"404"===b&&(a=c)}}}(),i=function(){var a="";return{render:function(b,d){var e=new c;if(a!==b||d){var f=this;e.get(g.doc_root+b).then(function(c){a=b,f.set(c)})}else e.unload();return e},set:function(a){g.container.innerHTML=a;for(var b=0,c=document.forms.length;b<c;b++)document.forms[b].action=g.doc_root+document.forms[b].getAttribute("action")}}}(),j={when:function(a){return h.add(a),this},missing:function(a){return h.addErrorRoute("404",a),this},navigate:function(a){return h.set(a).update(),this},get:function(a,b){var d=new c;return d.get(g.doc_root+a,b),d},digest:function(){return h.listen(),this},update:function(){return h.update(),this},listen:function(a,b,c){return d(a,b,c),this},uri:function(a){return e(a)},decodeURI:function(a){return f(a)},title:function(a){document.title=a}};return j}),function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.create=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){return function(a,b){var c=document.createElement(a),d={append:function(a,b){var d=document.createElement(a);return c.appendChild(d),"function"==typeof b&&b.call(d),this},appendTo:function(a){return a.appendChild(c),this},listen:function(a,b){return shll.listen(c,a,b),this},addClass:function(a){return c.classList.add(a),this}};return"function"==typeof b&&b.call(c),d}}),function(){function a(a){document.getElementById("nav_home").classList.remove("active"),document.getElementById("nav_blogg").classList.remove("active"),document.getElementById("nav_login").classList.remove("active"),document.getElementById(a).classList.add("active")}var b=function(){var a=[],c=30,d=!0;return{update:function(e){e=""===e?1:+e;var f,g;d||1===e||e!==a.length+1?(document.getElementById("posts").innerHTML="",a=[],f=0,g=e*c):(f=(e-1)*c,g=c),this.get(f,g),d&&(shll.listen(document.getElementById("load_posts"),"click",function(){b.next()}),d=!1)},reset:function(){a=[],d=!0},next:function(){shll.navigate("/blogg/"+(a.length+1))},get:function(b,d){shll.get("/api/get",{from:b,to:d}).then(function(b){for(var d=JSON.parse(b),e=document.getElementById("posts"),f=d.length,g=[],h=0;h<f;h++)g.push(d[h]),g.length===c?(a.push(g),g=[]):1===g.length&&create("li",function(){var b="Page "+(a.length+1);this.appendChild(document.createTextNode(b))}).addClass("page-number").appendTo(e),create("li").append("a",function(){this.href="/article/"+shll.uri(d[h].title),this.appendChild(document.createTextNode(d[h].title))}).appendTo(e)})},find:function(a,b){shll.get("/api/find",{title:encodeURIComponent(a),id:b}).then(function(a){var b=JSON.parse(a)[0];b?(document.getElementById("post").innerHTML="",document.getElementById("post").innerHTML+="<h1>"+b.title+"</h1>",document.getElementById("post").innerHTML+='<div class="post-text">'+b.text.substring(0)+"</div>"):document.getElementById("post").innerHTML="<i>The post you are looking for doesn't exist...</i>"})}}}();shll.when({path:"/",title:"shll",template:"/html/templates/home.html",callback:function(){a("nav_home")}}).when({path:"/blogg/?page",title:"shll | blogg",template:"/html/templates/posts.html",callback:function(c){b.update(c.page),a("nav_blogg")},offload:function(){b.reset()}}).when({path:"/article/&title",template:"/html/templates/article.html",callback:function(c){a("nav_blogg"),shll.title("shll | "+c.title),b.find(c.title),document.body.className="clean"},offload:function(){document.body.className=""}}).when({path:"/login",title:"shll | login",template:"/html/templates/login.html",callback:function(b){a("nav_login")}}).missing({title:"shll | 404",template:"/html/errors/404.html",callback:function(){a("nav_home")}})}();